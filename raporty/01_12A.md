# Raport Techniczny – Refaktoryzacja, Launcher i Silnik Hybrydowy (v2.2)

**Data:** 01.12.2025  
**Typ:** Hotfix / Feature Update  
**Status:** Wersja Stabilna

## 1. Cel Zmian
Celem wprowadzonych prac była finalizacja architektury dwukamerowej poprzez wprowadzenie wygodnej konfiguracji startowej (**Launcher**), optymalizacja wydajności poprzez rozłożenie obliczeń na GPU i CPU (**Hybrid Engine**) oraz poprawa UX poprzez integrację sterowania w głównym oknie.

## 2. Wprowadzone Zmiany

### A. Interfejs Użytkownika (UI/UX)
* **Launcher Konfiguracyjny:** Zaimplementowano nowe okno startowe (`ui/launcher.py`), które uruchamia się przed głównym systemem. Umożliwia ono graficzny wybór źródeł wideo (USB / Wi-Fi) oraz wprowadzanie adresów IP bez konieczności edycji kodu.
* **Zintegrowane Suwaki:** Usunięto osobne okna systemowe. Suwaki *Confidence* i *Smooth* są teraz integralną częścią panelu `CyberDashboard`, obsługiwaną przez zdarzenia myszy (`cv2.setMouseCallback`).
* **Ekran Ładowania (Boot Sequence):** Dodano ekran wyświetlający szczegółowe logi diagnostyczne (status GPU, ładowanie modeli, próby połączenia) podczas inicjalizacji systemu.

### B. Architektura: Silnik Hybrydowy (Hybrid Engine)
Wdrożono unikalną architekturę przetwarzania równoległego, wykorzystującą różne zasoby sprzętowe dla każdej z kamer:
* **Kamera 1 (Front):** Obsługiwana przez model **YOLOv8** (klasa `PoseDetectorYOLO`). Wykorzystuje akcelerację GPU (CUDA/NVIDIA), co odciąża procesor główny.
* **Kamera 2 (Side):** Obsługiwana przez model **MediaPipe** (klasa `PoseDetector`). Działa na CPU, co pozwala na równoczesną pracę obu systemów bez wzajemnego blokowania zasobów.

### C. Wizualizacja i Stabilność
* **Fix "Eksplodujący Szkielet":** W klasie `Visualizer` dodano metodę `draw_mp_skeleton` z dynamicznym filtrowaniem punktów o niskiej pewności. Rozwiązuje to problem błędów wizualnych (artefaktów) generowanych przez MediaPipe przy słabszym sygnale Wi-Fi.
* **Obsługa Offline:** Dashboard dynamicznie reaguje na stan drugiej kamery, wyświetlając status "OFFLINE" (jeśli wyłączona w Launcherze) lub "NO SIGNAL" (jeśli zerwano połączenie), zamiast zawieszać aplikację.

### D. Refaktoryzacja Kodu
* **Centralizacja:** Mapowanie punktów kluczowych (format COCO dla YOLO) oraz stałe konfiguracyjne przeniesiono do `config.py`.
* **Clean Code:** Oczyszczono `main.py` z logiki rysowania i definicji GUI, przenosząc te odpowiedzialności do odpowiednich klas w folderze `ui/`.

## 3. Wnioski
Wersja **v2.2** wprowadza pełną funkcjonalność **Hybrid Engine**, pozwalając na płynną analizę obrazu z dwóch źródeł nawet na sprzęcie klasy konsumenckiej (laptop z GPU). Dodanie Launchera czyni aplikację przyjazną dla użytkownika końcowego, eliminując potrzebę ingerencji w kod przy zmianie adresu IP kamery.